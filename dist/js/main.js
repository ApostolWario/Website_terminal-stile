"use strict";function Experience(e,t,n,r,i){this.name=e,this.position=t,this.location=n,this.date=r,this.description=i}function File(e,t,n,r,i,o,a){this.name=e,this.permissions=t,this.content=n,this.size=n.length,this.lastModified=r,this.user=i,this.group=o,this.directory=a}function hasFile(e,t){if(!e.directory)return null;for(var n in e.content)if(e.content[n].name===t)return e.content[n]}function arrLast(e){return e[e.length-1]}function FileSystem(){var e=new File("guest","drwxr-xr-x.",[],new Date,"guest","guest",!0),t=new File("admin","drwxr-xr-x.",[],new Date("Feb 16 2016"),"admin","admin",!0),n=[e,t],r=new File("home","drwxr-xr-x.",n,new Date("Feb 3 2016"),"root","root",!0);this.root=new File("/","drwxr-xr-x.",[r],new Date("July 3 2013"),"root","502",!0),this.pwdStack=[],this.pwdStack.push(this.root),this.pwdStack.push(r),this.pwdStack.push(e),this.prevStack=this.pwdStack.slice()}function followDirectory(e,t){for(var n,r=[],i=0;i<t.length();i++)if(""!==t[i]){if(n=hasFile(e,t[i]),null===n||!n.directory)return!1;r.push(n),e=n}return r}function followFile(e,t){for(var n,r=0;r<t.length();r++)if(""!==t[r]){if(n=hasFile(e,t[r]),null===n)return!1;e=n}return e}Experience.prototype.getString=function(){var e="";return e+=formatText("company",this.name),e+=Array(colWidth-this.name.length-this.location.length).join(" "),e+=formatText("violet",this.location)+"\n",e+=formatText("yellow",this.position),e+=Array(colWidth-this.position.length-this.date.length).join(" "),e+=formatText("violet",this.date)+"\n",e+=splitLines(this.description),e+="\n"};var monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateString=function(e){return monthNames[e.getMonth()]+"  "+e.getDay()+"  "+e.getHours()+":"+e.getMinutes()};File.prototype.getString=function(e){return e?this.name+" ":this.permission+"  "+this.user+"  "+this.group+"  "+this.size+"  "+dateString(this.lastModified)+"  "+this.directory?formatText("blue",this.name):this.name},FileSystem.prototype.cd=function(e){if("."===e)return!0;if(".."===e)return this.pwdStack.length>1&&(this.prevStack=this.pwdStack.slice(),this.pwdStack.pop()),!0;if("-"===e){var t=this.pwdStack;return this.pwdStack=this.prevStack,this.prevStack=t,!0}"string"!=typeof e&&(e=e.toString());var n,r,i=e.split("/");return n=""===i[0]?this.root:arrLast(this.pwdStack),(r=followDirectory(n,i))?(this.prevStack=this.pwdStack.slice(),this.pwdStack=[this.root].concat(r),!0):!1},FileSystem.prototype.pwd=function(){for(var e="",t=0;t<this.pwdStack.length;t++)e+=this.pwdStack[t].name,t!==this.pwdStack.length-1&&0!==t&&(e+="/");return e},FileSystem.prototype.ls=function(e,t){var n,r,i="";if(e){"string"!=typeof e&&(e=e.toString());var o,a=e.split("/");o=""===a[0]?this.root:arrLast(this.pwdStack),r=followFile(o,a)}else r=arrLast(this.pwdStack);if(r){if(r.directory)if(t){if(-1!==t.indexOf("l")){var s,c=0,l=0,u=0;for(n=0;n<r.content.length;n++)s=r.content[n],s.size.toString().length>c&&(c=s.size.toString().length),s.user.length>l&&(l=s.user.length),s.group.length>u&&(u=s.group.length);for(n=0;n<r.content.length;n++)s=r.content[n],i+=s.permissions,i+="  ",i+=s.user+Array(l-s.user.length+1).join(" "),i+="  ",i+=s.group+Array(u-s.group.length+1).join(" "),i+="  ",i+=Array(c-s.size.toString().length).join(" ")+s.size,i+="  ",i+=s.lastModified.toDateString(),i+="  ",i+=s.directory?formatText("cyan",r.content[n].name):r.content[n].name,i+="\n"}}else for(n=0;n<r.content.length;n++)i+=r.content.directory?formatText("cyan",r.content[n].name):r.content[n].name,i+=" ";return i}return!1};var getAge=function(){var e=new Date,t=new Date;t.setYear(1993),t.setMonth(4);var n=e-t.getTime(),r=new Date(n);return Math.abs(r.getUTCFullYear()-1970)},fs=new FileSystem,experiences=[new Experience("Groupon","Computational Marketing Intern","Seattle, WA","May 2015–Aug 2015","Evaluated Spark and SparkSQL as replacement for existing Hadoop Implementation. Saw 5-10x performance increase, proposed migration plan and identified key blockers and potential solutions. Implemented metrics, API, and testing framework for low-latency microservice with Play API and Cassandra. The full-times were busy with the existing system, so I got to do all the glorious coding!"),new Experience("Top Hat","Full-stack Developer Intern","Toronto, ON","Sept 2014–Dec 2014",'Fixed and wrote unit tests for ~40 bugs including XSS vulnerabilities, 2D distance calculations, and Excel export errors, totaling a weighted value of $192,840. Chasing bugs across stacks were actually kind of fun.  Led web accessibility project with a team of 2 making web interfaces ADA compliant. Feedback from stakeholder: "There\'s a lot of work to be done, but overall good work!"'),new Experience("IBM","Compiler Optimization Intern","Markham, ON","Jan 2014–Apr 2014","Created Node.js application that aggregated node-load output and plotted the data using d3.js. Refactored C++ compiler codebase to support JIT compilation for different languages. Humbling experience to appreciate how much work goes into making and optimizing a compiler."),new Experience("Maxxian","Software Developer Intern","Markham, ON","May 2013–Aug 2013","Developed MVC prototype replacement of current product with Django. Improved page load time by over 60 times implemented RESTful API which returns data from Postgres in JSON format. Significantly improved excel report generation times by caching and reusing data. First time working at a start up. Learned all my linux basics here, from setting up physical servers, to managing VMs with hypervisors, all the way to writing, installing and testing the software. "),new Experience("BMO InvestorLine","E-Business Specialist","Toronto, ON","Sept 2012–Dec 2012","Initiated automation effort to significantly improve efficiency of generating HTML tables from Excel documents using VBA. Had a friendly competition with a fellow intern on who will finish it first. He gave up in the end. Developed dynamic PDF forms using JavaScript to enforce correct data entry while providing easier client experience.")],BashResume={version:"0.1",help:function(){this.echo(formatText("bold","Command Line Resum&eacute; version "+BashResume.version+"-release (i686-pc-linux-gnu)")),this.echo("Available commands:"),this.echo("  "+formatText("bold","whoami")+"		get to know Yutong"),this.echo("  "+formatText("bold","experience")+"	what has yutong done?"),this.echo("  "+formatText("bold","projects")+"	  Yutong's proudest moments"),this.echo("  "+formatText("bold","help  ")+"		this help screen"),this.echo("  "+formatText("bold","about")+"		 about this site\n")},whoami:function(){this.echo(formatText("heading","Basic info:")),this.echo(formatText("bold","Subject Name: ")+"Yutong Luo"),this.echo(formatText("bold","Subject Role: ")+"Software Developer"),this.echo(formatText("bold","Subject Age: ")+getAge()),this.echo(formatText("bold","Subject Education: ")+"University of Waterloo (Graduate in 2016)"),this.echo(formatText("bold","Known Locations: ")+"Seattle, Toronto, Markham"),this.echo("\n"),this.echo(formatText("heading","Bio:")),this.echo(splitLines("Little is known about our bespectacled subject, besides his ability to code. Through rigorous training in the famed co-op program at University of Waterloo, he has interned at companies big and small. Through this process, he transformed from a novice who gets code to work to a man with an obsession for writing the perfect code. Now on a quest for an unobtainable goal, he is determined to be the best.")),this.echo("\n"),this.echo(formatText("heading","Skills:")),this.echo(formatText("skill","Big Data")),this.echo("Spark, SparkSQL, Hadoop, Hive\n"),this.echo(formatText("skill","Web Development")),this.echo("Django, Play, HTML5, CSS, Javascript, Backbone.js, RESTful API, Node.js\n"),this.echo(formatText("skill","Mobile Development")),this.echo("Android, Parse, Swift\n"),this.echo(formatText("skill","Languages")),this.echo("C++, Python, C, Java 8, JavaScript, jQuery, HTML, CSS, Bash, Swift\n")},experience:function(){for(var e=0;e<experiences.length;e++)this.echo(experiences[e].getString())},about:function(){this.echo("This site is made with jquery.terminal."),this.echo("Copyright &copy; Yutong Luo 2016\n")},projects:function(){this.echo(formatText("heading","Hackathons")),this.echo(formatText("company","Hack the North")+": "+formatText("violet","Bloomberg API Prize")),this.echo(formatText("yellow","Stockslate: A webapp which ranks stocks based on investor profiles\n")),this.echo(splitLines("Implemented back-end to pull data from Bloomberg API into MongoDB in realtime with Node.js\n")),this.echo(formatText("company","IBM FutureBlue Hackathon")+": "+formatText("violet","First Place")),this.echo(formatText("yellow","A web app which hosts car pooling for IBM employees\n")),this.echo(splitLines("Designed and implemented user interactions and dynamic HTML generation with JavaScript and jQuery\n")),this.echo(formatText("company","Groupon Geekon")+": "+formatText("violet","No prize but had fun")),this.echo(formatText("yellow","A large scale system within Groupon which aggregates multiple services together")),this.echo(splitLines("Implemented back-end API using Dropwizard in Java\n")),this.echo(formatText("heading","Projects")),this.echo(formatText("company","Toronto 311 Map")),this.echo("Using google map API, plot out all the potholes in Toronto\n"),this.echo(formatText("company","Timecatcher")),this.echo("A smart calendar Android app which schedules a user's day using AI algorithms\n")},pwd:function(){this.echo(fs.pwd())},cd:function(e){e?fs.cd(e)||this.error("No such directory!"):fs.cd("/home/guest")},ls:function(){for(var e="",t="",n=0;n<arguments.length;n++)"-"===arguments[n][0]?e+=arguments[n].substring(1):t=arguments[n];var r=fs.ls(t,e);r===!1?this.error("No such file or directory!"):this.echo(r)}};$(document).ready(function(){$("#term").terminal(BashResume,{greetings:"[[g;#fdf6e3;]__     __    _                      _\n\\ \\   / /   | |                    | |\n \\ \\_/ /   _| |_ ___  _ __   __ _  | |    _   _  ___\n  \\   / | | | __/ _ \\| '_ \\ / _` | | |   | | | |/ _ \\\n   | || |_| | || (_) | | | | (_| | | |___| |_| | (_) |\n   |_| \\__,_|\\__\\___/|_| |_|\\__, | |______\\__,_|\\___/\n                             __/ |                    \n                            |___/ \n\n]Welcome to Command Line Resum&eacute; v"+BashResume.version+". Type "+formatText("green","help")+" to start\n",prompt:function(e){var t=fs.pwd();"/home/guest"===fs.pwd()&&(t="~"),e("guest@yutongluo:"+t+"$ ")},onBlur:function(){return!1},checkArity:!1,completion:!0,history:!0})}),function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],r=n.length,i=window.console=window.console||{};r--;)e=n[r],i[e]||(i[e]=t)}(),function(e){function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};r.format=function(e,i){var o,a,s,c,l,u,h,f=1,p=e.length,m="",g=[];for(a=0;p>a;a++)if(m=t(e[a]),"string"===m)g.push(e[a]);else if("array"===m){if(c=e[a],c[2])for(o=i[f],s=0;s<c[2].length;s++){if(!o.hasOwnProperty(c[2][s]))throw r('[sprintf] property "%s" does not exist',c[2][s]);o=o[c[2][s]]}else o=c[1]?i[c[1]]:i[f++];if(/[^s]/.test(c[8])&&"number"!=t(o))throw r("[sprintf] expecting number but found %s",t(o));switch(c[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=c[7]?o.toExponential(c[7]):o.toExponential();break;case"f":o=c[7]?parseFloat(o).toFixed(c[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&c[7]?o.substring(0,c[7]):o;break;case"u":o>>>=0;break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(c[8])&&c[3]&&o>=0?"+"+o:o,u=c[4]?"0"==c[4]?"0":c[4].charAt(1):" ",h=c[6]-String(o).length,l=c[6]?n(u,h):"",g.push(c[5]?o+l:l+o)}return g.join("")},r.cache={},r.parse=function(e){for(var t=e,n=[],r=[],i=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){i|=1;var o=[],a=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw"[sprintf] huh?";for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw"[sprintf] huh?";o.push(s[1])}n[2]=o}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(n)}t=t.substring(n[0].length)}return r};var i=function(e,t,n){return n=t.slice(0),n.splice(0,0,e),r.apply(null,n)};e.sprintf=r,e.vsprintf=i}("undefined"!=typeof global?global:window),function(e,t){function n(e,t){var n;if("string"==typeof e&&"string"==typeof t)return localStorage[e]=t,!0;if("object"==typeof e&&"undefined"==typeof t){for(n in e)e.hasOwnProperty(n)&&(localStorage[n]=e[n]);return!0}return!1}function r(e,t){var n,r,i;if(n=new Date,n.setTime(n.getTime()+31536e6),r="; expires="+n.toGMTString(),"string"==typeof e&&"string"==typeof t)return document.cookie=e+"="+t+r+"; path=/",!0;if("object"==typeof e&&"undefined"==typeof t){for(i in e)e.hasOwnProperty(i)&&(document.cookie=i+"="+e[i]+r+"; path=/");return!0}return!1}function i(e){return localStorage[e]}function o(e){var t,n,r,i;for(t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}function a(e){return delete localStorage[e]}function s(e){return r(e,"",-1)}function c(e,t){var n=[],r=e.length;if(t>r)return[e];if(0>t)throw new Error("str_parts: length can't be negative");for(var i=0;r>i;i+=t)n.push(e.substring(i,i+t));return n}function l(t){var n=t?[t]:[],r=0;e.extend(this,{get:function(){return n},rotate:function(){return 1===n.length?n[0]:(r===n.length-1?r=0:++r,n[r]?n[r]:void this.rotate())},length:function(){return n.length},remove:function(e){delete n[e]},set:function(e){for(var t=n.length;t--;)if(n[t]===e)return void(r=t);this.append(e)},front:function(){for(var e=r;!n[e];)e++;return n[e]},append:function(e){n.push(e)}})}function u(t){var n=t instanceof Array?t:t?[t]:[];e.extend(this,{map:function(t){return e.map(n,t)},size:function(){return n.length},pop:function(){if(0===n.length)return null;var e=n[n.length-1];return n=n.slice(0,n.length-1),e},push:function(e){return n=n.concat([e]),e},top:function(){return n.length>0?n[n.length-1]:null},clone:function(){return new u(n.slice(0))}})}function h(t,n){var r=!0,i="";"string"==typeof t&&""!==t&&(i=t+"_"),i+="commands";var o=e.Storage.get(i);o=o?e.parseJSON(o):[];var a=o.length-1;e.extend(this,{append:function(t){r&&o[o.length-1]!==t&&(o.push(t),n&&o.length>n&&(o=o.slice(-n)),a=o.length-1,e.Storage.set(i,e.json_stringify(o)))},data:function(){return o},reset:function(){a=o.length-1},last:function(){return o[length-1]},end:function(){return a===o.length-1},position:function(){return a},current:function(){return o[a]},next:function(){return a<o.length-1&&++a,-1!==a?o[a]:void 0},previous:function(){var e=a;return a>0&&--a,-1!==e?o[a]:void 0},clear:function(){o=[],this.purge()},enabled:function(){return r},enable:function(){r=!0},purge:function(){e.Storage.remove(i)},disable:function(){r=!1}})}function f(t,n){var r=n(t);if(r.length){var i=r.shift(),o=new RegExp("^"+e.terminal.escape_regex(i)),a=t.replace(o,"").trim();return{command:t,name:i,args:r,rest:a}}return{command:t,name:"",args:[],rest:""}}function p(t){var n=e(window).scrollTop(),r=n+e(window).height(),i=e(t).offset().top,o=i+e(t).height();return o>=n&&r>=i}function m(){var t=e('<div class="terminal temp"><div class="cmd"><span class="cursor">&nbsp;</span></div></div>').appendTo("body"),n=t.find("span"),r={width:n.width(),height:n.outerHeight()};return t.remove(),r}function g(t){for(var n=e('<div class="terminal"><span class="cursor"></span></div>').appendTo("body").css("padding",0),r=n.find("span"),i=60,o="",a=0;i>=a;++a)o+="&nbsp;";r.html(o);var s=r.width()/i,c=Math.floor(t.width()/s);if(n.remove(),w(t)){var l=20,u=t.innerWidth()-t.width();c-=Math.ceil((l-u/2)/(s-1))}return c}function d(e){return Math.floor(e.height()/m().height)}function v(){if(window.getSelection||document.getSelection){var e=(window.getSelection||document.getSelection)();return e.text?e.text:e.toString()}return document.selection?document.selection.createRange().text:void 0}function w(t){return"scroll"==t.css("overflow")||"scroll"==t.css("overflow-y")?!0:t.is("body")?e("body").height()>e(window).height():t.get(0).scrollHeight>t.innerHeight()}e.omap=function(t,n){var r={};return e.each(t,function(e,i){r[e]=n.call(t,e,i)}),r};var y={clone_object:function(t){var n={};if("object"==typeof t){if(e.isArray(t))return this.clone_array(t);if(null===t)return t;for(var r in t)e.isArray(t[r])?n[r]=this.clone_array(t[r]):"object"==typeof t[r]?n[r]=this.clone_object(t[r]):n[r]=t[r]}return n},clone_array:function(t){if(!e.isFunction(Array.prototype.map))throw new Error("You'r browser don't support ES5 array map use es5-shim");return t.slice(0).map(function(e){return"object"==typeof e?this.clone_object(e):e}.bind(this))}},_=function(e){return y.clone_object(e)},b=function(){var e="test",t=window.localStorage;try{return t.setItem(e,"1"),t.removeItem(e),!0}catch(n){return!1}},x=b();e.extend({Storage:{set:x?n:r,get:x?i:o,remove:x?a:s}}),jQuery.fn.extend({everyTime:function(e,t,n,r,i){return this.each(function(){jQuery.timer.add(this,e,t,n,r,i)})},oneTime:function(e,t,n){return this.each(function(){jQuery.timer.add(this,e,t,n,1)})},stopTime:function(e,t){return this.each(function(){jQuery.timer.remove(this,e,t)})}}),jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===t||null===e)return null;var n=this.regex.exec(jQuery.trim(e.toString()));if(n[2]){var r=parseInt(n[1],10),i=this.powers[n[2]]||1;return r*i}return e},add:function(e,t,n,r,i,o){var a=0;if(jQuery.isFunction(n)&&(i||(i=r),r=n,n=t),t=jQuery.timer.timeParse(t),!("number"!=typeof t||isNaN(t)||0>=t)){i&&i.constructor!==Number&&(o=!!i,i=0),i=i||0,o=o||!1,e.$timers||(e.$timers={}),e.$timers[n]||(e.$timers[n]={}),r.$timerID=r.$timerID||this.guid++;var s=function(){o&&s.inProgress||(s.inProgress=!0,(++a>i&&0!==i||r.call(e,a)===!1)&&jQuery.timer.remove(e,n,r),s.inProgress=!1)};s.$timerID=r.$timerID,e.$timers[n][r.$timerID]||(e.$timers[n][r.$timerID]=window.setInterval(s,t)),this.global[n]||(this.global[n]=[]),this.global[n].push(e)}},remove:function(e,t,n){var r,i=e.$timers;if(i){if(t){if(i[t]){if(n)n.$timerID&&(window.clearInterval(i[t][n.$timerID]),delete i[t][n.$timerID]);else for(var o in i[t])i[t].hasOwnProperty(o)&&(window.clearInterval(i[t][o]),delete i[t][o]);for(r in i[t])if(i[t].hasOwnProperty(r))break;r||(r=null,delete i[t])}}else for(var a in i)i.hasOwnProperty(a)&&this.remove(e,a,n);for(r in i)if(i.hasOwnProperty(r))break;r||(e.$timers=null)}}}}),/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&jQuery(window).one("unload",function(){var e=jQuery.timer.global;for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t],r=n.length;--r;)jQuery.timer.remove(n[r],t)}),function(e){if(String.prototype.split.toString().match(/\[native/)){var t,n=String.prototype.split,r=/()??/.exec("")[1]===e;return t=function(t,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return n.call(t,i,o);var a,s,c,l,u=[],h=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),f=0;for(i=new RegExp(i.source,h+"g"),t+="",r||(a=new RegExp("^"+i.source+"$(?!\\s)",h)),o=o===e?-1>>>0:o>>>0;(s=i.exec(t))&&(c=s.index+s[0].length,!(c>f&&(u.push(t.slice(f,s.index)),!r&&s.length>1&&s[0].replace(a,function(){for(var t=1;t<arguments.length-2;t++)arguments[t]===e&&(s[t]=e)}),s.length>1&&s.index<t.length&&Array.prototype.push.apply(u,s.slice(1)),l=s[0].length,f=c,u.length>=o)));)i.lastIndex===s.index&&i.lastIndex++;return f===t.length?!l&&i.test("")||u.push(""):u.push(t.slice(f)),u.length>o?u.slice(0,o):u},String.prototype.split=function(e,n){return t(this,e,n)},t}}(),e.fn.caret=function(e){var t=this[0],n="true"===t.contentEditable;if(0==arguments.length){if(window.getSelection){if(n){t.focus();var r=window.getSelection().getRangeAt(0),i=r.cloneRange();return i.selectNodeContents(t),i.setEnd(r.endContainer,r.endOffset),i.toString().length}return t.selectionStart}if(document.selection){if(t.focus(),n){var r=document.selection.createRange(),i=document.body.createTextRange();return i.moveToElementText(t),i.setEndPoint("EndToEnd",r),i.text.length}var e=0,o=t.createTextRange(),i=document.selection.createRange().duplicate(),a=i.getBookmark();for(o.moveToBookmark(a);0!==o.moveStart("character",-1);)e++;return e}return 0}if(-1==e&&(e=this[n?"text":"val"]().length),window.getSelection)n?(t.focus(),window.getSelection().collapse(t.firstChild,e)):t.setSelectionRange(e,e);else if(document.body.createTextRange){var o=document.body.createTextRange();o.moveToElementText(t),o.moveStart("character",e),o.collapse(!0),o.select()}return n||t.focus(),e},e.json_stringify=function(n,r){var i,o="";r=r===t?1:r;var a=typeof n;switch(a){case"function":o+=n;break;case"boolean":o+=n?"true":"false";break;case"object":if(null===n)o+="null";else if(n instanceof Array){o+="[";var s=n.length;for(i=0;s-1>i;++i)o+=e.json_stringify(n[i],r+1);o+=e.json_stringify(n[s-1],r+1)+"]"}else{o+="{";for(var c in n)n.hasOwnProperty(c)&&(o+='"'+c+'":'+e.json_stringify(n[c],r+1));o+="}"}break;case"string":var l=n,u={"\\\\":"\\\\",'"':'\\"',"/":"\\/","\\n":"\\n","\\r":"\\r","\\t":"\\t"};for(i in u)u.hasOwnProperty(i)&&(l=l.replace(new RegExp(i,"g"),u[i]));o+='"'+l+'"';break;case"number":o+=String(n)}return o+=r>1?",":"",1===r&&(o=o.replace(/,([\]}])/g,"$1")),o.replace(/([\[{]),/g,"$1")};var k=function(){var e=document.createElement("div");return e.setAttribute("onpaste","return;"),"function"==typeof e.onpaste}();e.fn.cmd=function(n){function r(){if(C){var e=b.is(":focus");I?e||(b.focus(),y.oneTime(10,function(){b.focus()})):e&&b.blur()}}function i(){C&&y.oneTime(10,function(){b.val(M),y.oneTime(10,function(){b.caret(H)})})}function o(e){W.toggleClass("inverted")}function a(){E="(reverse-i-search)`"+N+"': ",Y()}function s(){E=A,L=!1,P=null,N=""}function l(t){var n,r,i=D.data(),o=i.length;if(t&&P>0&&(o-=P),N.length>0)for(var s=N.length;s>0;s--){r=e.terminal.escape_regex(N.substring(0,s)),n=new RegExp(r);for(var c=o;c--;)if(n.test(i[c]))return P=i.length-c,y.position(i[c].indexOf(r)),y.set(i[c],!0),U(),void(N.length!==s&&(N=N.substring(0,s),a()))}N=""}function u(){var e=y.width(),t=W.width();x=Math.floor(e/t)}function f(e){var t=e.substring(0,x-j),n=e.substring(x-j);return[t].concat(c(n,x))}function p(e){if(e=e.originalEvent,y.isenabled()){var t=y.find("textarea");t.is(":focus")||t.focus();var n;window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?n=e.clipboardData.getData("text/plain"):cmd.oneTime(100,function(){y.insert(t.val()),t.val(""),i()}),n&&(y.insert(n),t.val(""),i())}}function m(r){var i,o,c;if(I){if(e.isFunction(n.keydown)&&(i=n.keydown(r),i!==t))return i;if(38===r.which||80===r.which&&r.ctrlKey||(G=!0),!L||35!==r.which&&36!==r.which&&37!==r.which&&38!==r.which&&39!==r.which&&40!==r.which&&13!==r.which&&27!==r.which){if(r.altKey)return 68===r.which?(y.set(M.slice(0,H)+M.slice(H).replace(/ *[^ ]+ *(?= )|[^ ]+$/,""),!0),!1):!0;if(13===r.keyCode)if(r.shiftKey)y.insert("\n");else{(D&&M&&!O&&e.isFunction(n.historyFilter)&&n.historyFilter(M)||n.historyFilter instanceof RegExp&&M.match(n.historyFilter)||!n.historyFilter)&&D.append(M);var u=M;D.reset(),y.set(""),n.commands&&n.commands(u),e.isFunction(E)&&Y()}else if(8===r.which){if(L?(N=N.slice(0,-1),a()):""!==M&&H>0&&y["delete"](-1),C)return!0}else if(67===r.which&&r.ctrlKey&&r.shiftKey)K=v();else if(86===r.which&&r.ctrlKey&&r.shiftKey)""!==K&&y.insert(K);else if(9!==r.which||r.ctrlKey||r.altKey){if(46===r.which)return void y["delete"](1);if(D&&38===r.which&&!r.ctrlKey||80===r.which&&r.ctrlKey)G?(F=M,y.set(D.current())):y.set(D.previous()),G=!1;else if(D&&40===r.which&&!r.ctrlKey||78===r.which&&r.ctrlKey)y.set(D.end()?F:D.next());else if(37===r.which||66===r.which&&r.ctrlKey)if(r.ctrlKey&&66!==r.which){c=H-1,o=0," "===M[c]&&--c;for(var h=c;h>0;--h){if(" "===M[h]&&" "!==M[h+1]){o=h+1;break}if("\n"===M[h]&&"\n"!==M[h+1]){o=h;break}}y.position(o)}else H>0&&(y.position(-1,!0),U());else if(82===r.which&&r.ctrlKey)L?l(!0):(A=E,a(),F=M,y.set(""),U(),L=!0);else if(71==r.which&&r.ctrlKey)L&&(E=A,Y(),y.set(F),U(),L=!1,N="");else if(39===r.which||70===r.which&&r.ctrlKey)if(r.ctrlKey&&70!==r.which){" "===M[H]&&++H;var f=/\S[\n\s]{2,}|[\n\s]+\S?/,g=M.slice(H).match(f);!g||g[0].match(/^\s+$/)?y.position(M.length):" "!==g[0][0]?H+=g.index+1:(H+=g.index+g[0].length-1," "!==g[0][g[0].length-1]&&--H),U()}else H<M.length&&y.position(1,!0);else{if(123===r.which)return;if(36===r.which)y.position(0);else if(35===r.which)y.position(M.length);else{if(r.shiftKey&&45==r.which)return b.val(""),void(k?b.focus():p());if(!r.ctrlKey&&!r.metaKey)return V=!1,void(q=!0);if(192===r.which)return;if(r.metaKey){if(82===r.which)return;if(76===r.which)return}if(r.shiftKey){if(84===r.which)return}else{if(81===r.which){if(""!==M&&0!==H){var d=M.slice(0,H).match(/([^ ]+ *$)/);B=y["delete"](-d[0].length)}return!1}if(72===r.which)return""!==M&&H>0&&y["delete"](-1),!1;if(65===r.which)y.position(0);else if(69===r.which)y.position(M.length);else{if(88===r.which||67===r.which||84===r.which)return;if(89===r.which)""!==B&&y.insert(B);else{if(86===r.which)return b.val(""),void(k?b.focus():p());if(75===r.which)B=y["delete"](M.length-H);else if(85===r.which)""!==M&&0!==H&&(B=y["delete"](-H));else if(17===r.which)return!1}}}}}}else y.insert("	")}else s(),Y(),27===r.which&&y.set(""),U(),m.call(this,r);r.preventDefault()}}function g(){e.isFunction(n.onCommandChange)&&n.onCommandChange(M)}function d(r){var i;if(q=!1,!(r.ctrlKey&&99===r.which||V)){if(!L&&e.isFunction(n.keypress)&&(i=n.keypress(r)),i!==t&&!i)return i;if(I){if(e.inArray(r.which,[38,13,0,8])>-1&&(38!==r.which||!r.shiftKey)){if(123==r.keyCode)return;return!1}if(!r.ctrlKey&&(!r.altKey||100!==r.which)||r.altKey)return L?(N+=String.fromCharCode(r.which),l(),a()):y.insert(String.fromCharCode(r.which)),!1}}}function w(e){if(q){var t=b.val();(t||8==e.which)&&y.set(t)}}var y=this,_=y.data("cmd");if(_)return _;y.addClass("cmd"),y.append('<span class="prompt"></span><span></span><span class="cursor">&nbsp;</span><span></span>');var b=e("<textarea />").addClass("clipboard").appendTo(y);n.width&&y.width(n.width);var x,j,A,F,E,I,R,D,$,z=y.find(".prompt"),L=!1,N="",P=null,O=n.mask||!1,M="",K="",B="",H=0,J=n.historySize||60,W=y.find(".cursor");if(S&&!T)$=function(e){e?W.addClass("blink"):W.removeClass("blink")};else{var Q=!1;$=function(e){e&&!Q?(Q=!0,W.addClass("inverted"),y.everyTime(500,"blink",o)):Q&&!e&&(Q=!1,y.stopTime("blink",o),W.removeClass("inverted"))}}var q,U=function(t){function n(t,n){var r=t.length;if(n===r)a.html(e.terminal.encode(t)),W.html("&nbsp;"),s.html("");else if(0===n)a.html(""),W.html(e.terminal.encode(t.slice(0,1))),s.html(e.terminal.encode(t.slice(1)));else{var i=t.slice(0,n);a.html(e.terminal.encode(i));var o=t.slice(n,n+1);W.html(e.terminal.encode(o)),n===t.length-1?s.html(""):s.html(e.terminal.encode(t.slice(n+1)))}}function r(t){return"<div>"+e.terminal.encode(t)+"</div>"}function i(t){var n=s;e.each(t,function(t,i){n=e(r(i)).insertAfter(n).addClass("clear")})}function o(t){e.each(t,function(e,t){a.before(r(t))})}var a=W.prev(),s=W.next();return function(){var l,u;switch(typeof O){case"boolean":l=O?M.replace(/./g,"*"):M;break;case"string":l=M.replace(/./g,O)}var h,p;if(t.find("div").remove(),a.html(""),l.length>x-j-1||l.match(/\n/)){var m,g=l.match(/\t/g),d=g?3*g.length:0;if(g&&(l=l.replace(/\t/g,"\x00\x00\x00\x00")),l.match(/\n/)){var v=l.split("\n");for(p=x-j-1,h=0;h<v.length-1;++h)v[h]+=" ";for(v[0].length>p?(m=[v[0].substring(0,p)],u=v[0].substring(p),m=m.concat(c(u,x))):m=[v[0]],h=1;h<v.length;++h)v[h].length>x?m=m.concat(c(v[h],x)):m.push(v[h])}else m=f(l);if(g&&(m=e.map(m,function(e){return e.replace(/\x00\x00\x00\x00/g,"	")})),p=m[0].length,0===p&&1===m.length);else if(p>H)n(m[0],H),i(m.slice(1));else if(H===p)a.before(r(m[0])),n(m[1],0),i(m.slice(2));else{var w=m.length;if(p>H)n(m[0],H),i(m.slice(1));else if(H===p)a.before(r(m[0])),n(m[1],0),i(m.slice(2));else{var y=m.slice(-1)[0],_=l.length-H-d,b=y.length,k=0;if(b>=_)o(m.slice(0,-1)),k=b===_?0:b-_,n(y,k);else if(3===w)u=e.terminal.encode(m[0]),a.before("<div>"+u+"</div>"),n(m[1],H-p-1),u=e.terminal.encode(m[2]),s.after('<div class="clear">'+u+"</div>");else{var S,T;for(k=H,h=0;h<m.length;++h){var C=m[h].length;if(!(k>C))break;k-=C}T=m[h],S=h,k===T.length&&(k=0,T=m[++S]),n(T,k),o(m.slice(0,S)),i(m.slice(S+1))}}}}else""===l?(a.html(""),W.html("&nbsp;"),s.html("")):n(l,H)}}(y),Y=function(){function t(t){z.html(e.terminal.format(e.terminal.encode(t))),j=z.text().length}return function(){switch(typeof E){case"string":t(E);break;case"function":E(t)}}}(),G=!0,V=!1;e.extend(y,{name:function(e){if(e!==t){R=e;var n=D&&D.enabled()||!D;return D=new h(e,J),n||D.disable(),y}return R},purge:function(){return D.clear(),y},history:function(){return D},"delete":function(e,t){var n;return 0===e?y:(0>e?H>0&&(n=M.slice(0,H).slice(e),M=M.slice(0,H+e)+M.slice(H,M.length),t?g():y.position(H+e)):""!==M&&H<M.length&&(n=M.slice(H).slice(0,e),M=M.slice(0,H)+M.slice(H+e,M.length),g()),U(),i(),n)},set:function(e,n){return e!==t&&(M=e,n||y.position(M.length),U(),i(),g()),y},insert:function(e,t){return H===M.length?M+=e:M=0===H?e+M:M.slice(0,H)+e+M.slice(H),t?i():y.position(e.length,!0),U(),g(),y},get:function(){return M},commands:function(e){return e?(n.commands=e,y):e},destroy:function(){return X.unbind("keypress.cmd",d),X.unbind("keydown.cmd",m),X.unbind("paste.cmd",p),X.unbind("input.cmd",w),y.stopTime("blink",o),y.find(".cursor").next().remove().end().prev().remove().end().remove(),y.find(".prompt, .clipboard").remove(),y.removeClass("cmd").removeData("cmd"),y},prompt:function(e){if(e===t)return E;if("string"!=typeof e&&"function"!=typeof e)throw new Error("prompt must be a function or string");return E=e,Y(),U(),y},kill_text:function(){return B},position:function(t,r){return"number"==typeof t?(r?H+=t:H=0>t?0:t>M.length?M.length:t,e.isFunction(n.onPositionChange)&&n.onPositionChange(H),U(),i(),y):H},visible:function(){var e=y.visible;return function(){e.apply(y,[]),U(),Y()}}(),show:function(){var e=y.show;return function(){e.apply(y,[]),U(),Y()}}(),resize:function(e){return e?x=e:u(),U(),y},enable:function(){return I=!0,y.addClass("enabled"),$(!0),r(),y},isenabled:function(){return I},disable:function(){return I=!1,y.removeClass("enabled"),$(!1),r(),y},mask:function(e){return"undefined"==typeof e?O:(O=e,U(),y)}}),y.name(n.name||n.prompt||""),E="string"==typeof n.prompt?n.prompt:"> ",Y(),n.enabled!==t&&n.enabled!==!0||y.enable();var X=e(document.documentElement||window);return X.bind("keypress.cmd",d).bind("keydown.cmd",m).bind("input.cmd",w),k&&X.bind("paste.cmd",p),y.data("cmd",y),y};var S=function(){var e=!1,n="animation",r="",i="Webkit Moz O ms Khtml".split(" "),o="",a=document.createElement("div");if(a.style.animationName&&(e=!0),e===!1)for(var s=0;s<i.length;s++){var c=i[s]+"AnimationName";if(a.style[c]!==t){o=i[s],n=o+"Animation",r="-"+o.toLowerCase()+"-",e=!0;break}}return e}(),T=-1!=navigator.userAgent.toLowerCase().indexOf("android"),C=function(){
return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}(),j=/(\[\[[!gbiuso]*;[^;]*;[^\]]*\](?:[^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?)/i,A=/\[\[([!gbiuso]*);([^;]*);([^;\]]*);?([^;\]]*);?([^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/gi,F=/\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/gi,E=/\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]/gi,I=/^\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]$/gi,R=/^#([0-9a-f]{3}|[0-9a-f]{6})$/i,D=/(\bhttps?:\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'<>\]\[)])+\b)/gi,$=/((([^<>('")[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))/g,z=/('[^']*'|"(\\"|[^"])*"|(?:\/(\\\/|[^\/])+\/[gimy]*)(?=:? |$)|(\\ |[^ ])+|[\w-]+)/gi,L=/(\[\[[!gbiuso]*;[^;]*;[^\]]*\])/i,N=/^(\[\[[!gbiuso]*;[^;]*;[^\]]*\])/i,P=/\[\[[!gbiuso]*;[^;]*;[^\]]*\]?$/i,O=/(\[\[(?:[^\]]|\\\])*\]\])/;e.terminal={version:"{{VER}}",color_names:["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],valid_color:function(t){return t.match(R)?!0:-1!==e.inArray(t.toLowerCase(),e.terminal.color_names)},escape_regex:function(e){if("string"==typeof e){var t=/([-\\\^$\[\]()+{}?*.|])/g;return e.replace(t,"\\$1")}},have_formatting:function(e){return"string"==typeof e&&!!e.match(E)},is_formatting:function(e){return"string"==typeof e&&!!e.match(I)},format_split:function(e){return e.split(j)},split_equal:function(t,n,r){function i(){return"&nbsp;"==f.substring(d-6,d)||" "==f.substring(d-1,d)}for(var o=!1,a=!1,s="",c=[],l=t.replace(F,function(e,t,n){var r=t.match(/;/g).length;if(r>=4)return e;r=2==r?";;":3==r?";":"";var i=n.replace(/\\\]/g,"&#93;").replace(/\n/g,"\\n").replace(/&nbsp;/g," ");return"[["+t+r+i+"]"+n+"]"}).split(/\n/g),u=0,h=l.length;h>u;++u)if(""!==l[u])for(var f=l[u],p=0,m=0,g=-1,d=0,v=f.length;v>d;++d){if(f.substring(d).match(N))o=!0,a=!1;else if(o&&"]"===f[d])a?(o=!1,a=!1):a=!0;else if(o&&a||!o){if("&"===f[d]){var w=f.substring(d).match(/^(&[^;]+;)/);if(!w)throw new Error("Unclosed html entity in line "+(u+1)+" at char "+(d+1));d+=w[1].length-2,d===v-1&&c.push(y+w[1]);continue}"]"===f[d]&&"\\"===f[d-1]?--m:++m}if(i()&&(o&&a||!o||"["===f[d]&&"["===f[d+1])&&(g=d),(m===n||d===v-1)&&(o&&a||!o)){var y,_=e.terminal.strip(f.substring(g));_=e("<span>"+_+"</span>").text();var b=_.length;_=_.substring(0,d+n+1);var x=!!_.match(/\s/)||d+n+1>b;r&&-1!=g&&d!==v-1&&x?(y=f.substring(p,g),d=g-1):y=f.substring(p,d+1),r&&(y=y.replace(/(&nbsp;|\s)+$/g,"")),g=-1,p=d+1,m=0,s&&(y=s+y,y.match("]")&&(s=""));var k=y.match(F);if(k){var S=k[k.length-1];if("]"!==S[S.length-1])s=S.match(L)[1],y+="]";else if(y.match(P)){y.length;y=y.replace(P,""),s=S.match(L)[1]}}c.push(y)}}else c.push("");return c},encode:function(e){return e=e.replace(/&(?!#[0-9]+;|[a-zA-Z]+;)/g,"&amp;"),e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},escape_formatting:function(t){return e.terminal.escape_brackets(e.terminal.encode(t))},format:function(t,n){var r=e.extend({},{linksNoReferrer:!1},n||{});if("string"==typeof t){var i=e.terminal.format_split(t);return t=i&&i.length>1?e.map(i,function(t){return""===t?t:e.terminal.is_formatting(t)?t.replace(A,function(t,n,i,o,a,s,c){if(""===c)return"";c=c.replace(/\\]/g,"]");var l="";-1!==n.indexOf("b")&&(l+="font-weight:bold;");var u=[];-1!==n.indexOf("u")&&u.push("underline"),-1!==n.indexOf("s")&&u.push("line-through"),-1!==n.indexOf("o")&&u.push("overline"),u.length&&(l+="text-decoration:"+u.join(" ")+";"),-1!==n.indexOf("i")&&(l+="font-style:italic;"),e.terminal.valid_color(i)&&(l+="color:"+i+";",-1!==n.indexOf("g")&&(l+="text-shadow:0 0 5px "+i+";")),e.terminal.valid_color(o)&&(l+="background-color:"+o);var h;h=""===s?c:s.replace(/&#93;/g,"]");var f;return-1!==n.indexOf("!")?h.match($)?f='<a href="mailto:'+h+'" ':(f='<a target="_blank" href="'+h+'" ',r.linksNoReferrer&&(f+='rel="noreferrer" ')):f="<span ",""!==l&&(f+='style="'+l+'"'),""!==a&&(f+=' class="'+a+'"'),f+=-1!==n.indexOf("!")?">"+c+"</a>":' data-text="'+h.replace('"',"&quote;")+'">'+c+"</span>"}):"<span>"+t+"</span>"}).join(""):"<span>"+t+"</span>",t.replace(/<span><br\/?><\/span>/gi,"<br/>")}return""},escape_brackets:function(e){return e.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;")},strip:function(e){return e.replace(A,"$6")},active:function(){return Y.front()},parseArguments:function(t){return e.terminal.parse_arguments(t)},splitArguments:function(t){return e.terminal.split_arguments(t)},parseCommand:function(t){return e.terminal.parse_command(t)},splitCommand:function(t){return e.terminal.split_command(t)},parse_arguments:function(t){var n=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/;return e.map(t.match(z)||[],function(e){if("'"===e[0]&&"'"===e[e.length-1])return e.replace(/^'|'$/g,"");if('"'===e[0]&&'"'===e[e.length-1])return e=e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"),e.replace(/\\\\|\\t|\\n/g,function(e){return"t"===e[1]?"	":"n"===e[1]?"\n":"\\"}).replace(/\\x([0-9a-f]+)/gi,function(e,t){return String.fromCharCode(parseInt(t,16))}).replace(/\\0([0-7]+)/g,function(e,t){return String.fromCharCode(parseInt(t,8))});if(e.match(/^\/(\\\/|[^\/])+\/[gimy]*$/)){var t=e.match(/^\/([^\/]+)\/([^\/]*)$/);return new RegExp(t[1],t[2])}return e.match(/^-?[0-9]+$/)?parseInt(e,10):e.match(n)?parseFloat(e):e.replace(/\\ /g," ")})},split_arguments:function(t){return e.map(t.match(z)||[],function(e){return"'"===e[0]&&"'"===e[e.length-1]?e.replace(/^'|'$/g,""):'"'===e[0]&&'"'===e[e.length-1]?e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"):e.match(/\/.*\/[gimy]*$/)?e:e.replace(/\\ /g," ")})},parse_command:function(t){return f(t,e.terminal.parse_arguments)},split_command:function(t){return f(t,e.terminal.split_arguments)},extended_command:function(e,t){try{V=!1,e.exec(t,!0).then(function(){V=!0})}catch(n){}}},e.fn.visible=function(){return this.css("visibility","visible")},e.fn.hidden=function(){return this.css("visibility","hidden")};var M={};e.jrpc=function(t,n,r,i,o){M[t]=M[t]||0;var a=e.json_stringify({jsonrpc:"2.0",method:n,params:r,id:++M[t]});return e.ajax({url:t,data:a,success:function(t,n,r){var a=r.getResponseHeader("Content-Type");if(!a.match(/application\/json/)){var s="Response Content-Type is not application/json";if(!console||!console.warn)throw new Error("WARN: "+s);console.warn(s)}var c;try{c=e.parseJSON(t)}catch(l){if(!o)throw new Error("Invalid JSON");return void o(r,"Invalid JSON",l)}i(c,n,r)},error:o,contentType:"application/json",dataType:"text",async:!0,cache:!1,type:"POST"})};var K=!e.terminal.version.match(/^\{\{/),B="Copyright (c) 2011-2016 Jakub Jankiewicz <http://jcubic.pl>",H=K?" v. "+e.terminal.version:" ",J=new RegExp(" {"+H.length+"}$"),W="jQuery Terminal Emulator"+(K?H:""),Q=[["jQuery Terminal","(c) 2011-2016 jcubic"],[W,B.replace(/^Copyright | *<.*>/g,"")],[W,B.replace(/^Copyright /,"")],["      _______                 ________                        __","     / / _  /_ ____________ _/__  ___/______________  _____  / /"," __ / / // / // / _  / _/ // / / / _  / _/     / /  \\/ / _ \\/ /","/  / / // / // / ___/ // // / / / ___/ // / / / / /\\  / // / /__","\\___/____ \\\\__/____/_/ \\__ / /_/____/_//_/ /_/ /_/  \\/\\__\\_\\___/","         \\/          /____/                                   ".replace(J," ")+H,B],["      __ _____                     ________                              __","     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /"," __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /","/  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__","\\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/","          \\/              /____/                                          ".replace(J,"")+H,B]];e.terminal.defaults={prompt:"> ",history:!0,exit:!0,clear:!0,enabled:!0,historySize:60,maskChar:"*",checkArity:!0,raw:!1,exceptionHandler:null,cancelableAjax:!0,processArguments:!0,linksNoReferrer:!1,processRPCResponse:null,Token:!0,convertLinks:!0,historyState:!1,login:null,outputLimit:-1,formatters:[],onAjaxError:null,onRPCError:null,completion:!1,historyFilter:null,onInit:e.noop,onClear:e.noop,onBlur:e.noop,onFocus:e.noop,onTerminalChange:e.noop,onExit:e.noop,keypress:e.noop,keydown:e.noop,strings:{wrongPasswordTryAgain:"Wrong password try again!",wrongPassword:"Wrong password!",ajaxAbortError:"Error while aborting ajax call!",wrongArity:"Wrong number of arguments. Function '%s' expects %s got %s!",commandNotFound:"Command '%s' Not Found!",oneRPCWithIgnore:"You can use only one rpc with ignoreSystemDescribe",oneInterpreterFunction:"You can't use more than one function (rpcwith ignoreSystemDescribe counts as one)",loginFunctionMissing:"You didn't specify a login function",noTokenError:"Access denied (no token)",serverResponse:"Server responded",wrongGreetings:"Wrong value of greetings parameter",notWhileLogin:"You can't call `%s' function while in login",loginIsNotAFunction:"Authenticate must be a function",canExitError:"You can't exit from main interpreter",invalidCompletion:"Invalid completion",invalidSelector:'Sorry, but terminal said that "%s" is not valid selector!',invalidTerminalId:"Invalid Terminal ID",login:"login",password:"password",recursiveCall:"Recursive call detected, skip"}};var q,U=[],Y=window.terminals=new l,G=[],V=!1,X=!0,Z=!0;e.fn.terminal=function(n,r){function i(t){return e.isFunction(xe.processArguments)?f(t,xe.processArguments):xe.processArguments?e.terminal.parse_command(t):e.terminal.split_command(t)}function o(t){"string"==typeof t?ae.echo(t):t instanceof Array?ae.echo(e.map(t,function(t){return e.json_stringify(t)}).join(" ")):"object"==typeof t?ae.echo(e.json_stringify(t)):ae.echo(t)}function a(t){var n=/(.*):([0-9]+):([0-9]+)$/,r=t.match(n);r&&(ae.pause(),e.get(r[1],function(t){var n=location.href.replace(/[^\/]+$/,""),i=r[1].replace(n,"");ae.echo("[[b;white;]"+i+"]");var o=t.split("\n"),a=+r[2]-1;ae.echo(o.slice(a-2,a+3).map(function(t,n){return 2==n&&(t="[[;#f00;]"+e.terminal.escape_brackets(t)+"]"),"["+(a+n)+"]: "+t}).join("\n")).resume()},"text"))}function s(t){e.isFunction(xe.onRPCError)?xe.onRPCError.call(ae,t):ae.error("&#91;RPC&#93; "+t.message)}function c(t,n){var r=function(n,r){ae.pause(),e.jrpc(t,n,r,function(t){t.error?s(t.error):e.isFunction(xe.processRPCResponse)?xe.processRPCResponse.call(ae,t.result,ae):o(t.result),ae.resume()},h)};return function(e,t){if(""!==e){try{e=i(e)}catch(o){return void t.error(o.toString())}if(n&&"help"!==e.name){var a=t.token();a?r(e.name,[a].concat(e.args)):t.error("&#91;AUTH&#93; "+ke.noTokenError)}else r(e.name,e.args)}}}function l(n,r,o,a){return function(s,c){if(""!==s){var u;try{u=i(s)}catch(h){return void ae.error(h.toString())}var f=n[u.name],p=e.type(f);if("function"===p){if(!r||f.length===u.args.length)return f.apply(ae,u.args);ae.error("&#91;Arity&#93; "+sprintf(ke.wrongArity,u.name,f.length,u.args.length))}else if("object"===p||"string"===p){var m=[];"object"===p&&(m=Object.keys(f),f=l(f,xe.arity,o)),c.push(f,{prompt:u.name+"> ",name:u.name,completion:"object"===p?m:t})}else e.isFunction(a)?a(s,ae):e.isFunction(xe.onCommandNotFound)?xe.onCommandNotFound(s,ae):c.error(sprintf(ke.commandNotFound,u.name))}}}function h(t,n,r){ae.resume(),e.isFunction(xe.onAjaxError)?xe.onAjaxError.call(ae,t,n,r):"abort"!==n&&ae.error("&#91;AJAX&#93; "+n+" - "+ke.serverResponse+": \n"+e.terminal.escape_brackets(t.responseText))}function m(t,n,r){e.jrpc(t,"system.describe",[],function(i){if(i.procs){var a={};e.each(i.procs,function(r,i){a[i.name]=function(){var r=n&&"help"!=i.name,a=Array.prototype.slice.call(arguments),c=a.length+(r?1:0);if(xe.checkArity&&i.params&&i.params.length!==c)ae.error("&#91;Arity&#93; "+sprintf(ke.wrongArity,i.name,i.params.length,c));else{if(ae.pause(),r){var l=ae.token(!0);l?a=[l].concat(a):ae.error("&#91;AUTH&#93; "+ke.noTokenError)}e.jrpc(t,i.name,a,function(e){e.error?s(e.error):o(e.result),ae.resume()},h)}}}),r(a)}else r(null)},function(){r(null)})}function y(t,n,r){r=r||e.noop;var i,o=e.type(t),a={},s=0;if("array"===o){var u={};!function h(t,r){if(t.length){var o=t[0],a=t.slice(1),l=e.type(o);"string"===l?(s++,ae.pause(),xe.ignoreSystemDescribe?(1===s?i=c(o,n):ae.error(ke.oneRPCWithIgnore),h(a,r)):m(o,n,function(t){t&&e.extend(u,t),ae.resume(),h(a,r)})):"function"===l?i?ae.error(ke.oneInterpreterFunction):i=o:"object"===l&&(e.extend(u,o),h(a,r))}else r()}(t,function(){r({interpreter:l(u,!1,n,i),completion:Object.keys(u)})})}else if("string"===o)xe.ignoreSystemDescribe?r({interpreter:c(t,n),completion:xe.completion}):(ae.pause(),m(t,n,function(e){e?(a.interpreter=l(e,!1,n),a.completion=Object.keys(e)):(a.interpreter=c(t,n),a.completion=xe.completion),r(a),ae.resume()}));else if("object"===o)r({interpreter:l(t,xe.checkArity),completion:Object.keys(t)});else{if("undefined"===o)t=e.noop;else if("function"!==o)throw o+" is invalid interpreter value";r({interpreter:t,completion:xe.completion})}}function b(t,n){var r="boolean"===e.type(n)?"login":n;return function(n,i,o,a){ae.pause(),e.jrpc(t,r,[n,i],function(e){o(!e.error&&e.result?e.result:null),ae.resume()},h)}}function x(e){return"string"==typeof e?e:"string"==typeof e.fileName?e.fileName+": "+e.message:e.message}function k(t,n){e.isFunction(xe.exceptionHandler)?xe.exceptionHandler.call(ae,t):ae.exception(t,n)}function S(){var e;e=se.prop?se.prop("scrollHeight"):se.attr("scrollHeight"),se.scrollTop(e)}function T(t,n){try{if(e.isFunction(n))n(function(){});else if("string"!=typeof n){var r=t+" must be string or function";throw r}}catch(i){return k(i,t.toUpperCase()),!1}return!0}function j(t,n){xe.convertLinks&&(t=t.replace($,"[[!;;]$1]").replace(D,"[[!;;]$1]"));var r,i,o=e.terminal.defaults.formatters;if(!n.raw){for(r=0;r<o.length;++r)try{if("function"==typeof o[r]){var a=o[r](t);"string"==typeof a&&(t=a)}}catch(s){alert("formatting error at formatters["+r+"]\n"+(s.stack?s.stack:s))}t=e.terminal.encode(t)}if(re.push(ie),!n.raw&&(t.length>ue||t.match(/\n/))){var c=n.keepWords,l=e.terminal.split_equal(t,ue,c);for(r=0,i=l.length;i>r;++r)""===l[r]||"\r"===l[r]?re.push("<span></span>"):n.raw?re.push(l[r]):re.push(e.terminal.format(l[r],{linksNoReferrer:xe.linksNoReferrer}))}else n.raw||(t=e.terminal.format(t,{linksNoReferrer:xe.linksNoReferrer})),re.push(t);re.push(n.finalize)}function A(t,n){try{var r=e.extend({exec:!0,raw:!1,finalize:e.noop},n||{}),i="function"===e.type(t)?t():t;i="string"===e.type(i)?i:String(i),""!==i&&(r.exec?(i=e.map(i.split(O),function(t){return t.match(O)&&!e.terminal.is_formatting(t)?(t=t.replace(/^\[\[|\]\]$/g,""),ce&&ce.command==t?ae.error(ke.recursiveCall):e.terminal.extended_command(ae,t),""):t}).join(""),""!==i&&j(i,r)):j(i,r))}catch(o){re=[],alert("[Internal Exception(process_line)]:"+x(o)+"\n"+o.stack)}}function F(){Ie.resize(ue);var t,n=le.empty().detach();if(xe.outputLimit>=0){var r=0===xe.outputLimit?ae.rows():xe.outputLimit;t=de.slice(de.length-r-1)}else t=de;try{re=[],e.each(t,function(e,t){A.apply(null,t)}),Ie.before(n),ae.flush()}catch(i){alert("Exception in redraw\n"+i.stack)}}function E(){if(xe.greetings===t)ae.echo(ae.signature);else if(xe.greetings){var e=typeof xe.greetings;"string"===e?ae.echo(xe.greetings):"function"===e?xe.greetings.call(ae,ae.echo):ae.error(ke.wrongGreetings)}}function I(t){var n=Ie.prompt(),r=Ie.mask();switch(typeof r){case"string":t=t.replace(/./g,r);break;case"boolean":t=r?t.replace(/./g,xe.maskChar):e.terminal.escape_formatting(t)}var i={finalize:function(e){e.addClass("command")}};e.isFunction(n)?n(function(e){ae.echo(e+t,i)}):ae.echo(n+t,i)}function R(e){var t=Y.get()[e[0]];if(!t)throw new Error(ke.invalidTerminalId);G[e[1]]?t.import_view(G[e[1]]):(V=!1,e[2]&&t.exec(e[2]).then(function(){V=!0}))}function z(){V&&(X=!1,location.hash=e.json_stringify(q),setTimeout(function(){X=!0},100))}function L(){try{if(G.length){var t,n;null===history.state?(t=G[0],n=Y.get()[0]):(t=G[history.state.pos],n=Y.get()[history.state.id]),n.import_view(t.view),t.join.length&&e.each(t.join,function(e,t){var n=Y.get()[t.id];n.import_view(t.view)})}}catch(r){k(r,"TERMINAL")}}function N(n,r,i){function a(){i||(V=!0,xe.historyState&&ae.save_state(n,!1),V=l),c.resolve(),e.isFunction(xe.onAfterCommand)&&xe.onAfterCommand(ae,n)}oe&&(oe=!1,xe.historyState&&(G.length?ae.save_state(null):ae.save_state()));try{if(e.isFunction(xe.onBeforeCommand)&&xe.onBeforeCommand(ae,n)===!1)return;i||(ce=e.terminal.split_command(n)),W()||(i&&e.isFunction(xe.historyFilter)&&xe.historyFilter(n)||!xe.historyFilter)&&Ie.history().append(n);var s=Ee.top();r||I(n);var c=new e.Deferred,l=V;if(n.match(/^\s*login\s*$/i)&&ae.token(!0))return ae.level()>1?ae.logout(!0):ae.logout(),a(),c.promise();if(n.match(/^\s*(exit|clear)\s*$/i)&&!ye){if(xe.exit&&n.match(/^\s*exit\s*$/i)){var u=ae.level();(1==u&&ae.get_token()||u>1)&&(ae.get_token(!0)&&ae.set_token(t,!0),ae.pop())}else xe.clear&&n.match(/^\s*clear\s*$/i)&&ae.clear();return e.isFunction(xe.onAfterCommand)&&xe.onAfterCommand(ae,n),a(),c.promise()}var h=de.length-1,f=s.interpreter.call(ae,n,ae);return i&&Ie.history().append(n),f!==t?(ae.pause(),e.when(f).then(function(e){e&&h===de.length-1&&o(e),a(),ae.resume()})):(Te?ae.bind("resume.command",function m(){a(),ae.unbind("resume.command",m)}):a(),c.promise())}catch(p){throw k(p,"USER"),ae.resume(),p}}function P(){if(e.isFunction(xe.onBeforeLogout))try{if(xe.onBeforeLogout(ae)===!1)return}catch(t){throw k(t,"onBeforeLogout"),t}if(M(),e.isFunction(xe.onAfterLogout))try{xe.onAfterLogout(ae)}catch(t){throw k(t,"onAfterlogout"),t}ae.login(xe.login,!0,H)}function M(){var t=ae.prefix_name(!0)+"_";e.Storage.remove(t+"token"),e.Storage.remove(t+"login")}function K(t){var n=ae.prefix_name()+"_interpreters",r=e.Storage.get(n);r=r?e.parseJSON(r):[],-1==e.inArray(t,r)&&(r.push(t),e.Storage.set(n,e.json_stringify(r)))}function B(t){var n=Ee.top(),r=ae.prefix_name(!0);W()||K(r),Ie.name(r),e.isFunction(n.prompt)?Ie.prompt(function(e){n.prompt(e,ae)}):Ie.prompt(n.prompt),Ie.set(""),!t&&e.isFunction(n.onStart)&&n.onStart(ae)}function H(){function t(){if(X)try{if(location.hash){var t=location.hash.replace(/^#/,"");q=e.parseJSON(t)}else q=[];q.length?R(q[q.length-1]):G[0]&&ae.import_view(G[0])}catch(n){k(n,"TERMINAL")}}B(),E();var n=!1;if(e.isFunction(xe.onInit)){_e=function(){n=!0};try{xe.onInit(ae)}catch(r){k(r,"OnInit")}finally{_e=e.noop,n||ae.resume()}}Z&&xe.historyState&&(Z=!1,e.fn.hashchange?e(window).hashchange(t):e(window).bind("hashchange",t))}function J(t,n,r){xe.clear&&r.push("clear"),xe.exit&&r.push("exit");var i=Ie.get().substring(0,Ie.position());if(i===t){for(var o=new RegExp("^"+e.terminal.escape_regex(n)),a=[],s=r.length;s--;)o.test(r[s])&&a.push(r[s]);if(1===a.length)ae.insert(a[0].replace(o,""));else if(a.length>1)if(ge>=2)I(t),ae.echo(a.join("	")),ge=0;else{var c,l=!1;e:for(c=n.length;c<a[0].length;++c){for(s=1;s<a.length;++s)if(a[0].charAt(c)!==a[s].charAt(c))break e;l=!0}l&&ae.insert(a[0].slice(0,c).replace(o,""))}}}function W(){return ye||Ie.mask()!==!1}function ee(n){var r,i,o=Ee.top();if(!ae.paused()&&ae.enabled()){if(e.isFunction(o.keydown)){if(r=o.keydown(n,ae),r!==t)return r}else if(e.isFunction(xe.keydown)&&(r=xe.keydown(n,ae),r!==t))return r;var a;if(a=xe.completion&&"boolean"!=e.type(xe.completion)&&o.completion===t?xe.completion:o.completion,ae.oneTime(10,function(){Ce()}),9!==n.which&&(ge=0),68===n.which&&n.ctrlKey)return ye||(""===Ie.get()?Ee.size()>1||xe.login!==t?ae.pop(""):(ae.resume(),ae.echo("")):ae.set_command("")),!1;if(76===n.which&&n.ctrlKey)ae.clear();else{if(a&&9===n.which){++ge;var s,c=Ie.position(),l=Ie.get().substring(0,c),u=l.split(" ");if(1==u.length)s=u[0];else for(s=u[u.length-1],i=u.length-1;i>0&&"\\"==u[i-1][u[i-1].length-1];i--)s=u[i-1]+" "+s;switch(e.type(a)){case"function":a(ae,s,function(e){J(l,s,e)});break;case"array":J(l,s,a);break;default:throw new Error(u.invalidCompletion)}return!1}if(86===n.which&&n.ctrlKey)return void ae.oneTime(1,function(){S()});if(9===n.which&&n.ctrlKey){if(Y.length()>1)return ae.focus(!1),!1}else 34===n.which?ae.scroll(ae.height()):33===n.which?ae.scroll(-ae.height()):ae.attr({scrollTop:ae.attr("scrollHeight")})}}else if(68===n.which&&n.ctrlKey){if(U.length){for(i=U.length;i--;){var h=U[i];if(4!==h.readyState)try{h.abort()}catch(f){ae.error(u.ajaxAbortError)}}U=[],ae.resume()}return!1}}function te(){Re&&ae.focus()}function ne(){Re=Se,ae.disable()}var re=[],ie=1,oe=!0,ae=this;if(this.length>1)return this.each(function(){e.fn.terminal.call(e(this),n,e.extend({name:ae.selector},r))});if(ae.data("terminal"))return ae.data("terminal");if(0===ae.length)throw sprintf(e.terminal.defaults.strings.invalidSelector,ae.selector);var se,ce,le,ue,he,fe,pe,me,ge=0,de=[],ve=Y.length(),we=new u,ye=!1,_e=e.noop,be=[],xe=e.extend({},e.terminal.defaults,{name:ae.selector},r||{}),ke=e.terminal.defaults.strings,Se=xe.enabled,Te=!1;e.extend(ae,e.omap({id:function(){return ve},clear:function(){le.html(""),Ie.set(""),de=[];try{xe.onClear(ae)}catch(e){throw k(e,"onClear"),e}return ae.attr({scrollTop:0}),ae},export_view:function(){return{focus:Se,mask:Ie.mask(),prompt:ae.get_prompt(),command:ae.get_command(),position:Ie.position(),lines:_(de),interpreters:Ee.clone()}},import_view:function(e){if(ye)throw new Error(sprintf(ke.notWhileLogin,"import_view"));return ae.set_prompt(e.prompt),ae.set_command(e.command),Ie.position(e.position),Ie.mask(e.mask),e.focus&&ae.focus(),de=_(e.lines),Ee=e.interpreters,F(),ae},save_state:function(n,r){if(G.push(ae.export_view()),e.isArray(q)||(q=[]),n!==t&&!r){var i=[ve,G.length-1,n];q.push(i),z()}},exec:function(t,n,r){var i;if(e.isArray(t))return e.when.apply(e,e.map(t,function(e){return ae.exec(e,n)}));if(!Te){var o=N(t,n,!0).then(function(){r&&r.resolve(ae,1)});if(r)return r.promise();if(o)return o;if(!o){if(r)return r.resolve(ae,2),r.promise();try{i=new e.Deferred,o=i.promise(),i.resolve(ae,3)}catch(a){throw ae.exception(a),a}}return o}return i=r||new e.Deferred,be.push([t,n,i]),i?i.promise():void 0},autologin:function(e,t,n){return ae.trigger("terminal.autologin",[e,t,n]),ae},login:function(t,n,r,i){function o(t,o,s,c){if(o){for(;ae.level()>a;)ae.pop();xe.history&&Ie.history().enable();var l=ae.prefix_name(!0)+"_";e.Storage.set(l+"token",o),e.Storage.set(l+"login",t),ye=!1,e.isFunction(r)&&r()}else n?(s||ae.error(ke.wrongPasswordTryAgain),ae.pop().set_mask(!1)):(ye=!1,s||ae.error(ke.wrongPassword),ae.pop().pop()),e.isFunction(i)&&i();ae.off("terminal.autologin")}if(we.push([].slice.call(arguments)),ye)throw new Error(sprintf(ke.notWhileLogin,"login"));if(!e.isFunction(t))throw new Error(ke.loginIsNotAFunction);if(ae.token(!0)&&ae.login_name(!0))return e.isFunction(r)&&r(),ae;xe.history&&Ie.history().disable();var a=ae.level();return ye=!0,ae.on("terminal.autologin",function(e,t,n,r){o(t,n,r)}),ae.push(function(e){ae.set_mask(xe.maskChar).push(function(n){try{t.call(ae,e,n,function(t,n){o(e,t,n)})}catch(r){k(r,"AUTH")}},{prompt:ke.password+": ",name:"password"})},{prompt:ke.login+": ",name:"login"})},settings:function(){return xe},commands:function(){return Ee.top().interpreter},setInterpreter:function(t,n){function r(){ae.pause(),y(t,!!n,function(t){ae.resume();var n=Ee.top();e.extend(n,t),B(!0)})}"string"==e.type(t)&&n?ae.login(b(t,n),!0,r):r()},greetings:function(){return E(),ae},paused:function(){return Te},pause:function(){return _e(),!Te&&Ie&&(Te=!0,Ie.disable().hidden(),e.isFunction(xe.onPause)&&xe.onPause()),ae},resume:function(){if(Te&&Ie){Te=!1,Ie.enable().visible();var t=be;be=[],function n(){t.length&&ae.exec.apply(ae,t.shift()).then(n)}(),ae.trigger("resume"),S(),e.isFunction(xe.onResume)&&xe.onResume()}return ae},cols:function(){return xe.numChars?xe.numChars:g(ae)},rows:function(){return xe.numRows?xe.numRows:d(ae)},history:function(){return Ie.history()},history_state:function(e){return e?ae.oneTime(1,function(){xe.historyState=!0}):xe.historyState=!1,ae},next:function(){if(1===Y.length())return ae;var t=ae.offset().top;ae.height(),ae.scrollTop();if(p(ae)){Y.front().disable();var n=Y.rotate().enable(),r=n.offset().top-50;e("html,body").animate({scrollTop:r},500);try{xe.onTerminalChange(n)}catch(i){throw k(i,"onTerminalChange"),i}return n}return ae.enable(),e("html,body").animate({scrollTop:t-50},500),ae},focus:function(e,t){if(1===Y.length())if(e===!1)try{(!t&&xe.onBlur(ae)!==!1||t)&&ae.disable()}catch(n){throw k(n,"onBlur"),n}else try{(!t&&xe.onFocus(ae)!==!1||t)&&ae.enable()}catch(n){throw k(n,"onFocus"),n}else if(e===!1)ae.next();else{var r=Y.front();if(r!=ae&&(r.disable(),!t))try{xe.onTerminalChange(ae)}catch(n){throw k(n,"onTerminalChange"),n}Y.set(ae),ae.enable()}return ae.oneTime(1,function(){}),ae},freeze:function(e){e?(ae.disable(),me=!0):(me=!1,ae.enable())},frozen:function(){return me},enable:function(){return Se||me||(ue===t&&ae.resize(),Ie&&(Ie.enable(),Se=!0)),ae},disable:function(){return Se&&Ie&&!me&&(Se=!1,Ie.disable()),ae},enabled:function(){return Se},signature:function(){var e=ae.cols(),t=15>e?null:35>e?0:55>e?1:64>e?2:75>e?3:4;return null!==t?Q[t].join("\n")+"\n":""},version:function(){return e.terminal.version},cmd:function(){return Ie},get_command:function(){return Ie.get()},set_command:function(e){return Ie.set(e),ae},insert:function(e){if("string"==typeof e)return Ie.insert(e),ae;throw"insert function argument is not a string"},set_prompt:function(t){return T("prompt",t)&&(e.isFunction(t)?Ie.prompt(function(e){t(e,ae)}):Ie.prompt(t),Ee.top().prompt=t),ae},get_prompt:function(){return Ee.top().prompt},set_mask:function(e){return Ie.mask(e===!0?xe.maskChar:e),ae},get_output:function(t){return t?de:e.map(de,function(t){return e.isFunction(t[0])?t[0]():t[0]}).join("\n")},resize:function(t,n){if(ae.is(":visible")){t&&n&&(ae.width(t),ae.height(n)),t=ae.width(),n=ae.height();var r=ae.cols(),i=ae.rows();if(r!==ue||i!==he){ue=r,he=i,F();var o=Ee.top();e.isFunction(o.resize)?o.resize(ae):e.isFunction(xe.onResize)&&xe.onResize(ae),pe=n,fe=t,S()}}else ae.stopTime("resize"),ae.oneTime(500,"resize",function(){ae.resize(t,n)});return ae},flush:function(){try{var t;if(e.each(re,function(n,r){if(r===ie)t=e("<div></div>");else if(e.isFunction(r)){t.appendTo(le);try{r(t)}catch(i){k(i,"USER:echo(finalize)")}}else e("<div/>").html(r).appendTo(t).width("100%")}),xe.outputLimit>=0){var n=0===xe.outputLimit?ae.rows():xe.outputLimit,r=le.find("div div");if(r.length>n){var i=de.length-n+1,o=r.slice(0,i),a=o.parent();o.remove(),a.each(function(){var t=e(this);t.is(":empty")&&t.remove()})}}S(),re=[]}catch(s){alert("[Flush] "+x(s)+"\n"+s.stack)}return ae},update:function(e,t){return 0>e&&(e=de.length+e),de[e]?(de[e][0]=t,F()):ae.error("Invalid line number "+e),ae},echo:function(t,n){return t=t||"",e.when(t).then(function(t){try{re=[];var r=e.extend({flush:!0,raw:xe.raw,finalize:e.noop,keepWords:!1},n||{});A(t,r),de.push([t,e.extend(r,{exec:!1})]),r.flush&&ae.flush(),he=d(ae),Ce()}catch(i){alert("[Terminal.echo] "+x(i)+"\n"+i.stack)}}),ae},error:function(t,n){var r=e.terminal.escape_brackets(t).replace(/\\$/,"&#92;");return ae.echo("[[;;;error]"+r+"]",n)},exception:function(t,n){var r=x(t);n&&(r="&#91;"+n+"&#93;: "+r),r&&ae.error(r,{finalize:function(e){e.addClass("exception message")}}),"string"==typeof t.fileName&&(ae.pause(),e.get(t.fileName,function(e){ae.resume();var n=t.lineNumber-1,r=e.split("\n")[n];r&&ae.error("["+t.lineNumber+"]: "+r)})),t.stack&&ae.echo(t.stack.split(/\n/g).map(function(e){return"[[;;;error]"+e.replace(D,function(e){return"]"+e+"[[;;;error]"})+"]"}).join("\n"),{finalize:function(e){e.addClass("exception stack-trace")}})},scroll:function(e){var t;return e=Math.round(e),se.prop?(e>se.prop("scrollTop")&&e>0&&se.prop("scrollTop",0),t=se.prop("scrollTop"),se.scrollTop(t+e)):(e>se.attr("scrollTop")&&e>0&&se.attr("scrollTop",0),t=se.attr("scrollTop"),se.scrollTop(t+e)),ae},logout:function(e){if(e){var n=we.pop();ae.set_token(t,!0),ae.login.apply(ae,n)}else for(;Ee.size()>0&&!ae.pop(););return ae},token:function(t){return e.Storage.get(ae.prefix_name(t)+"_token")},set_token:function(t,n){var r=ae.prefix_name(n)+"_token";return"undefined"==typeof t?e.Storage.remove(r,t):e.Storage.set(r,t),ae},get_token:function(t){return e.Storage.get(ae.prefix_name(t)+"_token")},login_name:function(t){return e.Storage.get(ae.prefix_name(t)+"_login")},name:function(){return Ee.top().name},prefix_name:function(e){var t=(xe.name?xe.name+"_":"")+ve;if(e&&Ee.size()>1){var n=Ee.map(function(e){return e.name}).slice(1).join("_");n&&(t+="_"+n)}return t},read:function(t,n){var r=new e.Deferred;return ae.push(function(t){ae.pop(),e.isFunction(n)&&n(t),r.resolve(t)},{prompt:t}),r.promise()},push:function(n,r){r=r||{},!r.name&&ce&&(r.name=ce.name),r.prompt===t&&(r.prompt=r.name+" ");var i=Ee.top();i&&(i.mask=Ie.mask());var o=Te;return ae.pause(),y(n,!!r.login,function(t){if(Ee.push(e.extend({},t,r)),r.login){var i=e.type(r.login);"function"==i?ae.login(r.login,!1,B,ae.pop):("string"==e.type(n)&&"string"==i||"boolean"==i)&&ae.login(b(n,r.login),!1,B,ae.pop)}else B();o||ae.resume()}),ae},pop:function(n){n!==t&&I(n);ae.token(!0);if(1==Ee.size()){if(xe.login){if(P(),e.isFunction(xe.onExit))try{xe.onExit(ae)}catch(r){throw k(r,"onExit"),r}return!0}ae.error(ke.canExitError)}else{ae.token(!0)&&M();var i=Ee.pop();if(B(),e.isFunction(i.onExit))try{i.onExit(ae)}catch(r){throw k(r,"onExit"),r}ae.set_mask(Ee.top().mask)}return ae},option:function(t,n){if("undefined"==typeof n){if("string"==typeof t)return xe[t];"object"==typeof t&&e.each(t,function(e,t){xe[e]=t})}else xe[t]=n;return ae},level:function(){return Ee.size()},reset:function(){for(ae.clear();Ee.size()>1;)Ee.pop();return H(),ae},purge:function(){var t=ae.prefix_name()+"_",n=e.Storage.get(t+"interpreters");return e.each(e.parseJSON(n),function(t,n){e.Storage.remove(n+"_commands"),e.Storage.remove(n+"_token"),e.Storage.remove(n+"_login")}),Ie.purge(),e.Storage.remove(t+"interpreters"),ae},destroy:function(){return Ie.destroy().remove(),le.remove(),e(document).unbind(".terminal"),e(window).unbind(".terminal"),ae.unbind("click mousewheel"),
ae.removeData("terminal").removeClass("terminal"),xe.width&&ae.css("width",""),xe.height&&ae.css("height",""),e(window).off("blur",ne).off("focus",te),Y.remove(ve),Y.length()||e(window).off("popstate",L),ae}},function(e,t){return function(){try{return t.apply(ae,[].slice.apply(arguments))}catch(n){throw"exec"!==e&&"resume"!==e&&k(n,"TERMINAL"),n}}}));var Ce=function(){var e=w(ae);return function(){e!==w(ae)&&(ae.resize(),e=w(ae))}}();xe.width&&ae.width(xe.width),xe.height&&ae.height(xe.height);var je=navigator.userAgent.toLowerCase();if(se=je.match(/(webkit)[ \/]([\w.]+)/)||"body"!=ae[0].tagName.toLowerCase()?ae:e("html"),e(document).bind("ajaxSend.terminal",function(e,t,n){U.push(t)}),le=e("<div>").addClass("terminal-output").appendTo(ae),ae.addClass("terminal"),xe.login&&e.isFunction(xe.onBeforeLogin))try{xe.onBeforeLogin(ae)}catch(Ae){throw k(Ae,"onBeforeLogin"),Ae}var Fe;xe.login;"string"==typeof n?Fe=n:n instanceof Array&&"string"==typeof n[0]&&(Fe=n[0]),Fe&&("string"==typeof xe.login||xe.login)&&(xe.login=b(Fe,xe.login)),Y.append(ae);var Ee,Ie,Re;return y(n,!!xe.login,function(n){function r(t){var n=Y.get()[t[0]];if(n&&ve==n.id()&&t[2])try{return n.exec(t[2]).then(function(e,r){n.save_state(t[2],!0)})}catch(r){var i=e.terminal.escape_brackets(command),o="Error while exec with command "+i;n.error(o).exception(r)}}if(xe.completion&&"boolean"!=typeof xe.completion&&(n.completion=xe.completion),Ee=new u(e.extend({name:xe.name,prompt:xe.prompt,keypress:xe.keypress,keydown:xe.keydown,resize:xe.onResize,greetings:xe.greetings,mousewheel:xe.mousewheel},n)),Ie=e("<div/>").appendTo(ae).cmd({prompt:xe.prompt,history:xe.history,historyFilter:xe.historyFilter,historySize:xe.historySize,width:"100%",enabled:Se&&!C,keydown:ee,keypress:function(t){var n=Ee.top();return e.isFunction(n.keypress)?n.keypress(t,ae):e.isFunction(xe.keypress)?xe.keypress(t,ae):void 0},onCommandChange:function(t){if(e.isFunction(xe.onCommandChange))try{xe.onCommandChange(t,ae)}catch(n){throw k(n,"onCommandChange"),n}S()},commands:N}),Se&&ae.is(":visible")&&!C?ae.focus(t,!0):ae.disable(),ae.oneTime(100,function(){function t(t){var n=e(t.target);!n.closest(".terminal").length&&ae.enabled()&&xe.onBlur(ae)!==!1&&ae.disable()}e(document).bind("click.terminal",t).bind("contextmenu.terminal",t)}),!C)var i=e(window).on("focus",te).on("blur",ne);if(ae.click(function(e){ae.enabled()?C&&ae.focus(!0,!0):ae.focus(),Ie.enable()}).delegate(".exception a","click",function(t){var n=e(this).attr("href");n.match(/:[0-9]+$/)&&(t.preventDefault(),a(n))}),navigator.platform.match(/linux/i)||ae.mousedown(function(e){if(2==e.which){var t=v();ae.insert(t)}}),ae.is(":visible")&&(ue=ae.cols(),Ie.resize(ue),he=d(ae)),xe.login?ae.login(xe.login,!0,H):H(),ae.oneTime(100,function(){i.bind("resize.terminal",function(){if(ae.is(":visible")){var e=ae.width(),t=ae.height();pe===t&&fe===e||ae.resize()}})}),xe.execHash)if(location.hash)try{var o=location.hash.replace(/^#/,"");q=e.parseJSON(decodeURIComponent(o));var s=0;!function h(){var e=q[s++];e?r(e).then(h):V=!0}()}catch(c){}else V=!0;else V=!0;if(e.event.special.mousewheel){var l=!1;e(document).bind("keydown.terminal",function(e){e.shiftKey&&(l=!0)}).bind("keyup.terminal",function(e){(e.shiftKey||16==e.which)&&(l=!1)}),ae.mousewheel(function(t,n){if(!l){var r=Ee.top();if(e.isFunction(r.mousewheel)){var i=r.mousewheel(t,n,ae);if(i===!1)return}else e.isFunction(xe.mousewheel)&&xe.mousewheel(t,n,ae);n>0?ae.scroll(-40):ae.scroll(40)}})}}),ae.data("terminal",ae),ae}}(jQuery);var styles={bold:"[[b;#fdf6e3;]",glow:"[[g;#fdf6e3;]",green:"[[;#859900;]",yellow:"[[;#b58900;]",orange:"[[;#cb4b16;]",magenta:"[[;#d33682;]",violet:"[[;#6c71c4;]",blue:"[[;#268bd2;]",cyan:"[[;#2aa198;]",heading:"[[bug;#2aa198;]",company:"[[bg;#268bd2;]",skill:"[[bg;#859900;]"},colWidth=80,formatText=function(e,t){return styles[e]+t+"]"},splitLines=function(e){for(var t=e.split(" "),n=0,r=0,i="",o="",a=0;a<t.length;)r=n+t[a].length+1,r>colWidth&&""!==i?(i+="\n",n=0,o+=i,i=""):(n=r,i+=t[a++]+" ");return""!==i&&(o+=i),o};